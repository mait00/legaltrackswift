# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–µ–ª

## –ü—Ä–æ–±–ª–µ–º–∞
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–µ–ª —Ä–∞–±–æ—Ç–∞–ª–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –¢—Ä–µ–±–æ–≤–∞–ª–æ—Å—å —Ä–∞–∑–¥–µ–ª–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è –¥–≤—É—Ö —Ç–∏–ø–æ–≤ —Å—É–¥–æ–≤:
- **–ê—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–µ —Å—É–¥—ã (–ê–°)**: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ –Ω–æ–º–µ—Ä—É –¥–µ–ª–∞ –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
- **–°—É–¥—ã –æ–±—â–µ–π —é—Ä–∏—Å–¥–∏–∫—Ü–∏–∏ (–°–û–Æ)**: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ URL/—Å—Å—ã–ª–∫–µ —Å —Å–∞–π—Ç–∞ —Å—É–¥–∞

## –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. AddCaseViewModel.swift

**–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–∞ –ª–æ–≥–∏–∫–∞:**

#### –£–¥–∞–ª–µ–Ω–æ:
- ‚ùå –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –¥–µ–ª–∞ (`searchCase`)
- ‚ùå –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ (`searchResult`)
- ‚ùå –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–∏—Å–∫–∞ (`isSearching`)

#### –î–æ–±–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –ü—Ä—è–º–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–µ–ª–∞ –±–µ–∑ –ø–æ–∏—Å–∫–∞
- ‚úÖ –†–∞–∑–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –ê–° –∏ –°–û–Æ
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–µ—Ç–æ–¥–µ `addCase`:**

```swift
func addCase(input: String, isSou: Bool) async {
    var endpoint: String
    
    if isSou {
        // –î–ª—è –°–û–Æ –ø–µ—Ä–µ–¥–∞–µ–º URL
        endpoint = "/subs/add-case?url=\(encodedURL)&is_sou=1"
    } else {
        // –î–ª—è –ê–° –ø–µ—Ä–µ–¥–∞–µ–º –Ω–æ–º–µ—Ä –¥–µ–ª–∞
        endpoint = "/subs/add-case?case=\(encodedCase)&is_sou=0"
    }
    
    // –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ—á–∏—â–∞–µ–º –∫—ç—à
    CacheManager.shared.removeCache(forKey: "subscriptions")
}
```

**–ù–æ–≤—ã–π –º–µ—Ç–æ–¥ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:**

```swift
func validateInput(_ input: String, isSou: Bool) -> (isValid: Bool, errorMessage: String?) {
    if isSou {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —ç—Ç–æ URL
        if cleaned.contains("http") || cleaned.contains(".ru") || cleaned.contains(".—Ä—Ñ") {
            return (true, nil)
        }
    } else {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞ –¥–µ–ª–∞: –ê84-208/2026
        let pattern = "^[–êA–§F–∞-—èa-z]+\\d+-\\d+/\\d{4}$"
        // ...
    }
}
```

### 2. AddCaseView.swift

**–û–±–Ω–æ–≤–ª–µ–Ω UI:**

- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞ –∏ –ø–æ–¥—Å–∫–∞–∑–æ–∫
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (–æ–±—ã—á–Ω–∞—è –¥–ª—è –ê–°, URL –¥–ª—è –°–û–Æ)
- ‚úÖ –ü–æ–∫–∞–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª—è –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–∏–ø–∞ —Å—É–¥–∞
- ‚ùå –£–¥–∞–ª–µ–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ–∏—Å–∫–∞

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª—è –≤–≤–æ–¥–∞:**

```swift
TextField(selectedCourtType.placeholder, text: $inputText)
    .autocapitalization(selectedCourtType == .arbitration ? .allCharacters : .none)
    .keyboardType(selectedCourtType == .general ? .URL : .default)
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω–æ–≥–æ –¥–µ–ª–∞

**–í–≤–æ–¥:**
```
–¢–∏–ø: –ê—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–µ —Å—É–¥—ã (–ê–°)
–ü–æ–ª–µ: –ê84-208/2026
```

**–ó–∞–ø—Ä–æ—Å:**
```
POST /subs/add-case?case=–ê84-208/2026&is_sou=0
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–µ–ª–∞ –°–û–Æ

**–í–≤–æ–¥:**
```
–¢–∏–ø: –°—É–¥—ã –æ–±—â–µ–π —é—Ä–∏—Å–¥–∏–∫—Ü–∏–∏ (–°–û–Æ)
–ü–æ–ª–µ: https://sudrf.ru/modules.php?name=sud_delo&...
```

**–ó–∞–ø—Ä–æ—Å:**
```
POST /subs/add-case?url=https%3A%2F%2Fsudrf.ru%2Fmodules.php%3Fname%3Dsud_delo%26...&is_sou=1
```

## UI/UX —É–ª—É—á—à–µ–Ω–∏—è

### –î–æ
- üîç –ö–Ω–æ–ø–∫–∞ "–ù–∞–π—Ç–∏ –¥–µ–ª–æ" ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞ ‚Üí –∫–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å"
- ‚è±Ô∏è –î–≤–∞ —à–∞–≥–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

### –ü–æ—Å–ª–µ
- ‚ûï –û–¥–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥"
- ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
- üìù –ß–µ—Ç–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ

## API Endpoints

### POST /subs/add-case (–¥–ª—è –ê–°)
```
POST /subs/add-case?case=–ê84-208/2026&is_sou=0
```

### POST /subs/add-case (–¥–ª—è –°–û–Æ)
```
POST /subs/add-case?url=https://sudrf.ru/...&is_sou=1
```

### Response
```json
{
  "message": "–î–µ–ª–æ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ",
  "success": true,
  "data": {
    "id": 12345,
    "value": "–ê84-208/2026"
  }
}
```
